<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>vs. Raphael (Images) | Fabric.js Benchmarks</title>
    
    <link rel="stylesheet" href="/css/master.css">
  
    <script src="https://raw.github.com/kangax/fabric.js/gh-pages/dist/all.js"></script>
    <!--[if lt IE 9]>
      <script src="https://raw.github.com/kangax/fabric.js/gh-pages/lib/excanvas.js"></script>
    <![endif]-->
  
  </head>
  <body>
    <ul id="header">
  <li><a href="/demos">Demos</a></li>
  <li><a href="/benchmarks">Benchmarks</a></li>
  <li><a href="/docs">Docs</a></li>
  <li><a href="/test">Tests</a></li>
  <li class="flattr">
    <a class="FlattrButton" style="display:none;" rev="flattr;button:compact;" href="http://kangax.github.com/fabric.js"></a>
    <noscript><a href="http://flattr.com/thing/391332/Fabric-js" target="_blank">
    <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a></noscript>
  </li>
  <li class="twitter"><a href="http://twitter.com/fabricjs"><span>Twitter</span></a></li>
  <li class="github"><a href="http://github.com/kangax/fabric.js"><span>Github</span></a></li>
</ul>
<script>
(function() {
  var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
  s.async = true;
  s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
  t.parentNode.insertBefore(s, t);
})();
</script>
  
    <div id="bd-wrapper">
      <h2><span>Fabric.js benchmarks</span> &middot; vs. Raphael (Images)</h2>
    
      <style>
  svg {
    border: 1px solid #000;
  }
  .canvas_container {
    display: block;
  }
</style>
<img src="/lib/pug.jpg" style="position:absolute;left:-999px;top:-999px">
<script src="/lib/raphael-min.js"></script>
<script>
  function getRandomNum(min, max) {
    return Math.random() * (max - min) + min;
  }
  
  var numObjects = 20,
      width = 500,
      height = 500,
      opacity = 0.75;
      
  window.onload = function() {
    
    var logEl = document.getElementById('log');
    
    (function testRaphael() {
      
      var paper = Raphael(550, 140, width, height),
          startTime = new Date(),
          circle;

      for (var i = numObjects; i--; ) {
        img = paper.image("/lib/pug.jpg", getRandomNum(-25, width), getRandomNum(-25, height), 100, 100);
        img.rotate(getRandomNum(0, 90));
        img.attr('opacity', opacity);
      }
      
      logEl.innerHTML = 'Raphael: <b class="bench">' + (new Date() - startTime) + '</b> ms<br>';
      
    })();
    
    (function testFabric() {
      
      var canvas = window.__canvas = new fabric.Element('canvas', { 
            renderOnAddition: false, 
            stateful: false 
          }),
          Image = fabric.Image,
          totalTime = 0,
          circle;

      for (var i = numObjects; i--; ) {
        fabric.Image.fromURL('/lib/pug.jpg', (function(i){
          return function(o) {
            var startTime = new Date();

            o.set('left', getRandomNum(-25, width))
              .set('top', getRandomNum(-25, height))
              .scale(0.2)
              .setCoords();
            o.rotate(getRandomNum(0, 90));
            o.set('opacity', opacity);
            canvas.add(o);

            if (i === 0) {
              canvas.renderAll();
              logEl.innerHTML += 'fabric: <b class="bench">' + totalTime + '</b> ms';
            }

            totalTime += (new Date() - startTime);
          };
        })(i));
      }
      
    })();
  };
</script>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Images</title>
    
  </head>
  <body>
    <p>Rendering an image</p>
    <canvas id="canvas" width="500" height="500"></canvas>
    <p id="log"></p>
  </body>
</html>
    </div>
  </body>
</html>